{
  "id": "d0000000-0000-0000-0000-000000000002",
  "kind": "Template",
  "name": "EndpointsModTemplate",
  "schema_version": "2.0",
  "spec": {
    "description": "Generate endpoints/mod.rs with router",
    "helpers": [
      {
        "function": "to_snake_case",
        "name": "snake_case"
      },
      {
        "function": "to_lowercase",
        "name": "lower"
      }
    ],
    "input": "Vec<IntentDocument>",
    "output_file": "gen/src/endpoints/mod.rs",
    "template": [
      "// @generated by intent-engine v{{version}}",
      "// DO NOT EDIT - changes will be overwritten",
      "",
      "{{#each endpoints}}",
      "pub mod {{snake_case name}};",
      "{{/each}}",
      "",
      "use axum::Router;",
      "",
      "pub fn router() -> Router {",
      "    Router::new()",
      "{{#each endpoints}}",
      "        .route(\"{{path}}\", axum::routing::{{lower method}}({{snake_case name}}::{{snake_case name}}))",
      "{{/each}}",
      "}",
      ""
    ]
  }
}