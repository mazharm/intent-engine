{
  "id": "d0000000-0000-0000-0000-000000000003",
  "kind": "Template",
  "name": "EndpointHandlerTemplate",
  "schema_version": "2.0",
  "spec": {
    "description": "Generate individual endpoint handler files",
    "helpers": [
      {
        "function": "to_snake_case",
        "name": "snake_case"
      },
      {
        "function": "to_pascal_case",
        "name": "pascal_case"
      }
    ],
    "input": "IntentDocument",
    "output_file": "gen/src/endpoints/{{snake_case name}}.rs",
    "template": [
      "// @generated by intent-engine v{{version}}",
      "// DO NOT EDIT - changes will be overwritten",
      "// source: {{source_file}}",
      "",
      "use axum::{extract::State, Json};",
      "use crate::types::{{{input}}, {{output}}};",
      "use crate::workflows::{{snake_case workflow}};",
      "use crate::errors::{{pascal_case name}}Error;",
      "",
      "pub async fn {{snake_case name}}(",
      "    Json(input): Json<{{input}}>,",
      ") -> Result<Json<{{output}}>, {{pascal_case name}}Error> {",
      "{{#if timeout_ms}}    // Timeout: {{timeout_ms}} ms{{/if}}",
      "    let output = {{snake_case workflow}}::{{snake_case workflow}}(input).await?;",
      "    Ok(Json(output))",
      "}",
      ""
    ]
  }
}