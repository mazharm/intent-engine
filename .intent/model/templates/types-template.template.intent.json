{
  "id": "d0000000-0000-0000-0000-000000000001",
  "kind": "Template",
  "name": "TypesTemplate",
  "schema_version": "2.0",
  "spec": {
    "description": "Generate Rust types from Type intents",
    "helpers": [
      {
        "description": "Convert to snake_case",
        "function": "to_snake_case",
        "name": "snake_case"
      },
      {
        "description": "Convert TypeRef to Rust type",
        "function": "type_ref_to_rust",
        "name": "rust_type"
      }
    ],
    "input": "Vec<IntentDocument>",
    "output_file": "gen/src/types.rs",
    "template": [
      "// @generated by intent-engine v{{version}}",
      "// DO NOT EDIT - changes will be overwritten",
      "",
      "use serde::{Deserialize, Serialize};",
      "",
      "{{#each types}}",
      "#[derive(Debug, Clone, Serialize, Deserialize)]",
      "pub struct {{name}} {",
      "{{#each fields}}",
      "{{#if optional}}    #[serde(skip_serializing_if = \"Option::is_none\")]{{/if}}",
      "    pub {{snake_case name}}: {{rust_type type}},",
      "{{/each}}",
      "}",
      "",
      "{{/each}}"
    ]
  }
}